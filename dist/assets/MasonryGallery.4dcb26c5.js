import{L as x,S as A,i as P,s as Q,e as _,g as U,f as L,h as g,T,q as B,j as I,k as C,a1 as $,B as ee,r as W,W as te,n as F,l as H,D as ie,p as j,z as J,$ as ne,a2 as O,G as se,t as E,c as ae,m as oe,a as D,d as le,y as N,v as V,C as re,a3 as ce,o as ue,F as de}from"./vendor.152b18c6.js";import{m as he,p as me}from"./marqueeHandlerStore.47cc0480.js";import{g as G}from"./store.113de28b.js";var K={exports:{}};/*!
 * Colcade v0.2.0
 * Lightweight masonry layout
 * by David DeSandro
 * MIT license
 */(function(a){(function(r,s){a.exports?a.exports=s():r.Colcade=s()})(window,function(){function s(e,t){if(e=u(e),e&&e.colcadeGUID){var n=l[e.colcadeGUID];return n.option(t),n}this.element=e,this.options={},this.option(t),this.create()}var i=s.prototype;i.option=function(e){this.options=f(this.options,e)};var o=0,l={};i.create=function(){this.errorCheck();var e=this.guid=++o;this.element.colcadeGUID=e,l[e]=this,this.reload(),this._windowResizeHandler=this.onWindowResize.bind(this),this._loadHandler=this.onLoad.bind(this),window.addEventListener("resize",this._windowResizeHandler),this.element.addEventListener("load",this._loadHandler,!0)},i.errorCheck=function(){var e=[];if(this.element||e.push("Bad element: "+this.element),this.options.columns||e.push("columns option required: "+this.options.columns),this.options.items||e.push("items option required: "+this.options.items),e.length)throw new Error("[Colcade error] "+e.join(". "))},i.reload=function(){this.updateColumns(),this.updateItems(),this.layout()},i.updateColumns=function(){this.columns=m(this.options.columns,this.element)},i.updateItems=function(){this.items=m(this.options.items,this.element)},i.getActiveColumns=function(){return this.columns.filter(function(e){var t=getComputedStyle(e);return t.display!="none"})},i.layout=function(){this.activeColumns=this.getActiveColumns(),this._layout()},i._layout=function(){this.columnHeights=this.activeColumns.map(function(){return 0}),this.layoutItems(this.items)},i.layoutItems=function(e){e.forEach(this.layoutItem,this)},i.layoutItem=function(e){var t=Math.min.apply(Math,this.columnHeights),n=this.columnHeights.indexOf(t);this.activeColumns[n].appendChild(e),this.columnHeights[n]+=e.offsetHeight||1},i.append=function(e){var t=this.getQueryItems(e);this.items=this.items.concat(t),this.layoutItems(t)},i.prepend=function(e){var t=this.getQueryItems(e);this.items=t.concat(this.items),this._layout()},i.getQueryItems=function(e){e=h(e);var t=document.createDocumentFragment();return e.forEach(function(n){t.appendChild(n)}),m(this.options.items,t)},i.measureColumnHeight=function(e){var t=this.element.getBoundingClientRect();this.activeColumns.forEach(function(n,c){if(!e||n.contains(e)){var p=n.lastElementChild.getBoundingClientRect();this.columnHeights[c]=p.bottom-t.top}},this)},i.onWindowResize=function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.onDebouncedResize()}.bind(this),100)},i.onDebouncedResize=function(){var e=this.getActiveColumns(),t=e.length==this.activeColumns.length,n=!0;this.activeColumns.forEach(function(c,p){n=n&&c==e[p]}),!(t&&n)&&(this.activeColumns=e,this._layout())},i.onLoad=function(e){this.measureColumnHeight(e.target)},i.destroy=function(){this.items.forEach(function(e){this.element.appendChild(e)},this),window.removeEventListener("resize",this._windowResizeHandler),this.element.removeEventListener("load",this._loadHandler,!0),delete this.element.colcadeGUID,delete l[this.guid]},v(function(){var e=m("[data-colcade]");e.forEach(d)});function d(e){var t=e.getAttribute("data-colcade"),n=t.split(","),c={};n.forEach(function(p){var b=p.split(":"),y=b[0].trim(),q=b[1].trim();c[y]=q}),new s(e,c)}s.data=function(e){e=u(e);var t=e&&e.colcadeGUID;return t&&l[t]},s.makeJQueryPlugin=function(e){if(e=e||window.jQuery,!e)return;e.fn.colcade=function(c){if(typeof c=="string"){var p=Array.prototype.slice.call(arguments,1);return t(this,c,p)}return n(this,c),this};function t(c,p,b){var y;return c.each(function(q,S){var k=e.data(S,"colcade");if(!!k){var M=k[p].apply(k,b);y=y===void 0?M:y}}),y!==void 0?y:c}function n(c,p){c.each(function(b,y){var q=e.data(y,"colcade");q?(q.option(p),q.layout()):(q=new s(y,p),e.data(y,"colcade",q))})}},s.makeJQueryPlugin();function f(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=[];if(Array.isArray(e))t=e;else if(e&&typeof e.length=="number")for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}function m(e,t){t=t||document;var n=t.querySelectorAll(e);return h(n)}function u(e){return typeof e=="string"&&(e=document.querySelector(e)),e}function v(e){if(document.readyState=="complete"){e();return}document.addEventListener("DOMContentLoaded",e)}return s})})(K);var fe=K.exports;function ge(a){const r=document.lazyLoadInstance;if(window.location.origin!=="http://jsdom.ssr")return r.update(),{update(s){x.resetStatus(a),r.update()}}}function pe(a){let r,s,i,o,l,d,f,h=a[0].label+"",m,u,v,e,t,n,c,p,b,y,q=a[0].label+"",S,k,M,R;return{c(){r=_("div"),s=_("div"),i=_("div"),o=_("div"),l=_("div"),d=_("div"),f=_("h5"),m=U(h),u=L(),v=_("img"),p=L(),b=_("div"),y=_("h5"),S=U(q),g(f,"class","label"),g(d,"class","label-container svelte-l6jqiu"),g(l,"class","hover-container svelte-l6jqiu"),g(v,"width",e=a[0].width),g(v,"height",t=a[0].height),g(v,"class","image lazy svelte-l6jqiu"),g(v,"data-src",n=a[0].url),g(v,"alt",""),g(o,"class","image-container svelte-l6jqiu"),T(i,"padding-bottom",a[0].height/a[0].width*100+"%"),g(i,"class","aspect-ratio-box svelte-l6jqiu"),g(y,"class","label"),g(b,"class","label-container svelte-l6jqiu"),g(r,"class",k="item-container "+a[2].category+" svelte-l6jqiu"),B(r,"image-container-margin",a[1]||a[2].category==="design")},m(w,z){I(w,r,z),C(r,s),C(s,i),C(i,o),C(o,l),C(l,d),C(d,f),C(f,m),C(o,u),C(o,v),C(s,p),C(s,b),C(b,y),C(y,S),M||(R=[$(c=ge.call(null,v,a[0].url)),ee(r,"click",a[4])],M=!0)},p(w,[z]){z&1&&h!==(h=w[0].label+"")&&W(m,h),z&1&&e!==(e=w[0].width)&&g(v,"width",e),z&1&&t!==(t=w[0].height)&&g(v,"height",t),z&1&&n!==(n=w[0].url)&&g(v,"data-src",n),c&&te(c.update)&&z&1&&c.update.call(null,w[0].url),z&1&&T(i,"padding-bottom",w[0].height/w[0].width*100+"%"),z&1&&q!==(q=w[0].label+"")&&W(S,q),z&4&&k!==(k="item-container "+w[2].category+" svelte-l6jqiu")&&g(r,"class",k),z&6&&B(r,"image-container-margin",w[1]||w[2].category==="design")},i:F,o:F,d(w){w&&H(r),M=!1,ie(R)}}}function ve(a,r,s){let i,o;j(a,J,h=>s(2,i=h)),j(a,G,h=>s(3,o=h));let{img:l}=r,{modal:d}=r;const f=()=>{["private-homes","multi-units"].includes(i.pages)?G.openModal(l,"spec"):G.openModal(l,"basic"),l.label.replace(/\s/g,""),fetch(`${window.location.origin==="http://jsdom.ssr"?"http://localhost:9999":window.location.origin}/.netlify/functions/get-full-images/?category=${i.pages}${i.pages==="private-homes"?`&subCategory=${l.category}`:""}&property=${o.selected.key}`).then(m=>m.json()).then(async m=>{ne(G,o.images=m,o),await O()})};return a.$$set=h=>{"img"in h&&s(0,l=h.img),"modal"in h&&s(1,d=h.modal)},[l,d,i,o,f]}class ye extends A{constructor(r){super();P(this,r,ve,pe,Q,{img:0,modal:1})}}function X(a,r,s){const i=a.slice();return i[14]=r[s],i}function Y(a){let r,s,i,o,l,d,f,h,m=a[2],u=[];for(let e=0;e<m.length;e+=1)u[e]=Z(X(a,m,e));const v=e=>D(u[e],1,1,()=>{u[e]=null});return{c(){r=_("div"),s=L(),i=_("div"),o=L(),l=_("div"),d=L();for(let e=0;e<u.length;e+=1)u[e].c();f=se(),g(r,"class","grid-col grid-col--1 svelte-14qzcsp"),g(i,"class","grid-col grid-col--2 svelte-14qzcsp"),g(l,"class","grid-col grid-col--3 svelte-14qzcsp")},m(e,t){I(e,r,t),I(e,s,t),I(e,i,t),I(e,o,t),I(e,l,t),I(e,d,t);for(let n=0;n<u.length;n+=1)u[n].m(e,t);I(e,f,t),h=!0},p(e,t){if(t&15){m=e[2];let n;for(n=0;n<m.length;n+=1){const c=X(e,m,n);u[n]?(u[n].p(c,t),E(u[n],1)):(u[n]=Z(c),u[n].c(),E(u[n],1),u[n].m(f.parentNode,f))}for(N(),n=m.length;n<u.length;n+=1)v(n);V()}},i(e){if(!h){for(let t=0;t<m.length;t+=1)E(u[t]);h=!0}},o(e){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)D(u[t]);h=!1},d(e){e&&H(r),e&&H(s),e&&H(i),e&&H(o),e&&H(l),e&&H(d),re(u,e),e&&H(f)}}}function Z(a){let r,s,i,o;return s=new ye({props:{modal:a[0],masonry:a[3],img:a[14],grid:a[1]}}),{c(){r=_("div"),ae(s.$$.fragment),i=L(),g(r,"class","grid-item")},m(l,d){I(l,r,d),oe(s,r,null),C(r,i),o=!0},p(l,d){const f={};d&1&&(f.modal=l[0]),d&4&&(f.img=l[14]),d&2&&(f.grid=l[1]),s.$set(f)},i(l){o||(E(s.$$.fragment,l),o=!0)},o(l){D(s.$$.fragment,l),o=!1},d(l){l&&H(r),le(s)}}}function _e(a){let r,s,i,o=a[2].length>0&&Y(a);return{c(){r=_("div"),s=_("div"),o&&o.c(),g(s,"class","container masonry-container svelte-14qzcsp"),g(r,"class","wrapper svelte-14qzcsp")},m(l,d){I(l,r,d),C(r,s),o&&o.m(s,null),a[8](s),i=!0},p(l,[d]){l[2].length>0?o?(o.p(l,d),d&4&&E(o,1)):(o=Y(l),o.c(),E(o,1),o.m(s,null)):o&&(N(),D(o,1,1,()=>{o=null}),V())},i(l){i||(E(o),i=!0)},o(l){D(o),i=!1},d(l){l&&H(r),o&&o.d(),a[8](null)}}}function we(a,r,s){let i,o,l,d,f;j(a,ce,c=>s(12,l=c)),j(a,J,c=>s(6,d=c)),j(a,he,c=>s(7,f=c));let{modal:h}=r,m,u=[];ue(()=>{});let v,e;async function t(){const p=new URLSearchParams(window.location.search).get("sub_category");i&&(s(2,u=[]),fetch(`${window.location.origin}/.netlify/functions/images/?category=${i}${p?`&sub_category=${p}`:""}`).then(b=>b.json()).then(async b=>{s(2,u=b),await O(),e?e.reload():e=new fe(m,{columns:".grid-col",items:".grid-item"})}))}l();function n(c){de[c?"unshift":"push"](()=>{m=c,s(1,m)})}return a.$$set=c=>{"modal"in c&&s(0,h=c.modal)},a.$$.update=()=>{a.$$.dirty&128&&s(5,{page:i}=f,i),a.$$.dirty&64&&s(4,{sub_category:o}=d,o),a.$$.dirty&32&&i==="private-homes"&&[...me.pages.byTitle["private-homes"].categories],a.$$.dirty&48&&t()},[h,m,u,v,o,i,d,f,n]}class ze extends A{constructor(r){super();P(this,r,we,_e,Q,{modal:0})}}export{ze as default};
